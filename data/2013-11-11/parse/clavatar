
(:TYPE :SYSTEM :NAME "clavatar" :AUTHOR "Pixie <pix@kepibu.org>" :MAINTAINER
 NIL :VERSION NIL :LICENCE "MIT" :DESCRIPTION
 "Determines appropriate URLs for avatars using assorted avatar services."
 :LONG-DESCRIPTION NIL :DEPENDS-ON ("iolib" "ironclad" "babel" "drakma")
 :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "CLAVATAR" :FULL-NAME "CLAVATAR" :DOCUMENTATION NIL
   :SYMBOL-LIST
   ((:TYPE :FUNCTION :SYMBOL
     (:NAME "BUILD-URL-QUERY" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "ARGS" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "DEFAULT-PORT-P" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "SCHEME" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "PORT" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :STRUCT :SYMBOL
     (:NAME "%E-MAIL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :SUPER-CLASS-LIST
     ((:NAME "STRUCTURE-OBJECT" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "LOCAL-PART" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :ACCESSORS
       NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "DOMAIN" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :ACCESSORS NIL
       :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "MAKE-%E-MAIL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "LOCAL-PART" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "DOMAIN" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "MAKE-E-MAIL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)) :DOCUMENTATION
     NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "ENSURE-IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "IDENTIFIER-HASH" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "HASH" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "CANONICAL-IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "CANONICAL-IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "CANONICAL-IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "URI" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "URI" :PACKAGE-NAME "PURI" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "CANONICAL-IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "E-MAIL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "%E-MAIL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "IDENTIFIER-DOMAIN" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "IDENTIFIER-DOMAIN" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "IDENTIFIER-DOMAIN" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "URI" :PACKAGE-NAME "PURI" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "IDENTIFIER-DOMAIN" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "%E-MAIL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :CLASS :SYMBOL
     (:NAME "HOSTED-SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :SUPER-CLASS-LIST NIL :DOCUMENTATION NIL :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "BASE-URI" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :ACCESSORS
       NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :CLASS :SYMBOL
     (:NAME "LIBRAVATAR-PROTOCOL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :SUPER-CLASS-LIST NIL :DOCUMENTATION NIL :SLOT-LIST NIL)
    (:TYPE :CLASS :SYMBOL
     (:NAME "GRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T) :SUPER-CLASS-LIST
     ((:NAME "HOSTED-SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "BASE-URI" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :ACCESSORS
       NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :CLASS :SYMBOL
     (:NAME "LIBRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :SUPER-CLASS-LIST
     ((:NAME "HOSTED-SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "LIBRAVATAR-PROTOCOL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "BASE-URI" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :ACCESSORS
       NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :CLASS :SYMBOL
     (:NAME "UNICORNIFY" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :SUPER-CLASS-LIST
     ((:NAME "HOSTED-SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "BASE-URI" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :ACCESSORS
       NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :CLASS :SYMBOL
     (:NAME "FEDERATED-SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
     :SUPER-CLASS-LIST
     ((:NAME "LIBRAVATAR-PROTOCOL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL :SLOT-LIST NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "SIZE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "DEFAULT" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
         (:NAME "GRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T))))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
         (:NAME "LIBRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T))))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
         (:NAME "UNICORNIFY" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T))))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
         (:NAME "FEDERATED" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "HOSTED-SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "SIZE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "DEFAULT" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&ALLOW-OTHER-KEYS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "GRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "LIBRAVATAR-PROTOCOL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "UNICORNIFY" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       (:NAME "FEDERATED-SERVICE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL))
      (:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "SIZE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "DEFAULT" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&ALLOW-OTHER-KEYS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "GET-AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "SIZE" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      (:NAME "DEFAULT" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
      ((:NAME "SERVICES" :PACKAGE-NAME "CLAVATAR" :EXTERNALP NIL)
       ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "LIBRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
         (:NAME "GRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)))))
     :DOCUMENTATION "Returns an avatar URL for a given identifier.

First, checks if the domain of identifier provides some clue as to how to get
avatars.  If so, uses the federated behavior of the domain.  Otherwise, tries
SERVICES in order and uses the first service which does not return a 404.  Will
use DEFAULT on the last service if no service knows about the identifier.

Note that because this involves DNS and HTTP queries, it is slow and you should
cache the results."))
   :EXTERNAL-SYMBOLS
   ((:NAME "LIBRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
    (:NAME "GET-AVATAR-URL" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
    (:NAME "GRAVATAR" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
    (:NAME "IDENTIFIER-DOMAIN" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
    (:NAME "UNICORNIFY" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)
    (:NAME "CANONICAL-IDENTIFIER" :PACKAGE-NAME "CLAVATAR" :EXTERNALP T)))))
