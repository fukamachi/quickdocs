
(:TYPE :SYSTEM :NAME "simple-finalizer" :AUTHOR "Luke Crook <luke@balooga.com>"
 :MAINTAINER "Luke Crook <luke@balooga.com>" :VERSION "0.1" :LICENCE "BSD"
 :DESCRIPTION
 "A simple Common Lisp finalizer for foreign objects when using CFFI and TRIVIAL-GARBAGE."
 :LONG-DESCRIPTION NIL :DEPENDS-ON ("CFFI" "TRIVIAL-GARBAGE") :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "SIMPLE-FINALIZER" :FULL-NAME "SIMPLE-FINALIZER"
   :DOCUMENTATION NIL :SYMBOL-LIST
   ((:TYPE :CLASS :SYMBOL
     (:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
     :SUPER-CLASS-LIST NIL :DOCUMENTATION
     "A wrapper around the foreign object stored in `FP`.
    Finalizes the foreign object using the function in `:FREE` when `GC-P` is `T` when the wrapper is garbage collected.
    The foreign object is explicitely freed by calling `FREE`."
     :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "FOREIGN-POINTER-TO-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER"
        :EXTERNALP NIL)
       :ACCESSORS NIL :READERS
       ((:NAME "FP" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)) :WRITERS
       NIL :DOCUMENTATION "Returns the foreign object reference.")
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "GARBAGE-COLLECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP
        NIL)
       :ACCESSORS NIL :READERS
       ((:NAME "GC-P" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)) :WRITERS
       NIL :DOCUMENTATION
       "Returns `T` if the foreign object will be finalized.")
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "FREE-FUNCTION" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
       :ACCESSORS NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :METHOD :SYMBOL
     (:NAME "INITIALIZE-INSTANCE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "SELF" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
       (:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T))
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "&ALLOW-OTHER-KEYS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "FREE" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T))
     :DOCUMENTATION
     "An explicit cleanup method. When freed, `GC-P` will be NIL.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "FREE" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T) :LAMBDA-LIST
     (((:NAME "SELF" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
       (:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     ((:NAME "SETF" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "GC-P" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T))
     :LAMBDA-LIST
     ((:NAME "VALUE" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
      (:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T))
     :DOCUMENTATION "Enables or disables finalization.")
    (:TYPE :METHOD :SYMBOL
     ((:NAME "SETF" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "GC-P" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T))
     :LAMBDA-LIST
     ((:NAME "VALUE" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
      ((:NAME "SELF" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
       (:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "THIS-FP" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T))
     :DOCUMENTATION
     "Returns the foreign object reference. This method may not be redefined by a subclass.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "THIS-FP" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "SELF" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
       (:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "FREE-P" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T))
     :DOCUMENTATION
     "Returns `T if the foreign object was previously deleted using `FREE`.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "FREE-P" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "SELF" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
       (:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SIMPLE-FREE" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "FUNC-FP" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP NIL)
      (:NAME "TYPE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL))
   :EXTERNAL-SYMBOLS
   ((:NAME "GC-P" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
    (:NAME "FREE-P" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
    (:NAME "FREE" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
    (:NAME "THIS-FP" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
    (:NAME "FOREIGN-OBJECT" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)
    (:NAME "FP" :PACKAGE-NAME "SIMPLE-FINALIZER" :EXTERNALP T)))))
