
(:TYPE :SYSTEM :NAME "weblocks-prevalence" :AUTHOR "Slava Akhmechet"
 :MAINTAINER "Olexiy Zamkoviy, Scott L. Burson" :VERSION "0.1.2" :LICENCE
 "LLGPL" :DESCRIPTION "A weblocks backend for cl-prevalence." :LONG-DESCRIPTION
 NIL :DEPENDS-ON
 ("METATILITIES" "CL-PPCRE" "CL-PREVALENCE" "BORDEAUX-THREADS"
  "WEBLOCKS-MEMORY" "WEBLOCKS-STORES")
 :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "WEBLOCKS-PREVALENCE" :FULL-NAME "WEBLOCKS-PREVALENCE"
   :DOCUMENTATION
   "A driver for weblocks backend store API that connects to CL-Prevalence."
   :SYMBOL-LIST
   ((:TYPE :VARIABLE :SYMBOL
     (:NAME "*LOCKS*" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
     :DOCUMENTATION
     "Locks for Prevalence operation guards; one lock per store."
     :INITIAL-VALUE "(MAKE-HASH-TABLE :TEST #'EQ)")
    (:TYPE :METHOD :SYMBOL
     (:NAME "OPEN-STORE" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE-TYPE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        (:NAME "PREVALENCE" :PACKAGE-NAME "KEYWORD" :EXTERNALP T)))
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "ARGS" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "CLOSE-STORE" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "CLEAN-STORE" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "BEGIN-TRANSACTION" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "COMMIT-TRANSACTION" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "ROLLBACK-TRANSACTION" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP
      T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :CLASS :SYMBOL
     (:NAME "PERSISTENT-OBJECTS-OF-CLASS" :PACKAGE-NAME "WEBLOCKS-PREVALENCE"
      :EXTERNALP NIL)
     :SUPER-CLASS-LIST NIL :DOCUMENTATION
     "This class represents an alternative to RDBMS
  table, holding object instances of a given class."
     :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "OBJECTS-BY-ID" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP
        NIL)
       :ACCESSORS
       ((:NAME "PERSISTENT-OBJECTS-OF-CLASS-BY-ID" :PACKAGE-NAME
         "WEBLOCKS-PREVALENCE" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION
       "A hashmap with keys being object
                  IDs, and values being object instances.")
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "NEXT-ID" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T) :ACCESSORS
       ((:NAME "PERSISTENT-OBJECTS-OF-CLASS-NEXT-ID" :PACKAGE-NAME
         "WEBLOCKS-PREVALENCE" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION
       "The ID of the last created object. When
            objects are created, this slot is incremented and its
            value is used to automatically generate object IDs.")))
    (:TYPE :METHOD :SYMBOL
     (:NAME "PERSIST-OBJECT" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T))
      (:NAME "OBJECT" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "TXN-P" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "T" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "TX-PERSIST-OBJECT-PREVALENCE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE"
      :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
      (:NAME "OBJECT" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL))
     :DOCUMENTATION "Persists the object in the store.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "DELETE-PERSISTENT-OBJECT" :PACKAGE-NAME "WEBLOCKS-STORES"
      :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T))
      (:NAME "OBJECT" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "DELETE-PERSISTENT-OBJECT-BY-ID" :PACKAGE-NAME "WEBLOCKS-STORES"
      :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T))
      (:NAME "CLASS-NAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "OBJECT-ID" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "TX-DELETE-OBJECT-BY-ID-PREVALENCE" :PACKAGE-NAME
      "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
      (:NAME "CLASS-NAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "OBJECT-ID" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T))
     :DOCUMENTATION "Delets a persistent object from the store.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "FIND-PERSISTENT-OBJECT-BY-ID" :PACKAGE-NAME "WEBLOCKS-STORES"
      :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T))
      (:NAME "CLASS-NAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "OBJECT-ID" :PACKAGE-NAME "WEBLOCKS-STORES" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "FIND-PERSISTENT-OBJECTS" :PACKAGE-NAME "WEBLOCKS-STORES"
      :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T))
      (:NAME "CLASS-NAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "FILTER" :PACKAGE-NAME "METABANG.UTILITIES" :EXTERNALP T)
       (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      (:NAME "ORDER-BY" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
      (:NAME "RANGE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
      (:NAME "SLOT" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
      ((:NAME "VALUE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "VALUE-GIVEN" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP
        NIL))
      ((:NAME "TEST" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       ((:NAME "FUNCTION" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        (:NAME "EQUAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))))
     :DOCUMENTATION
     "The slot and value keys must appear together.  If they appear, a
filter will be applied (before the filter passed, if any) that
requires all objects to have the given value in the given slot.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "TX-FIND-PERSISTENT-OBJECTS-PREVALENCE" :PACKAGE-NAME
      "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
      (:NAME "CLASS-NAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION "Finds persistent objects of a given class.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "COUNT-PERSISTENT-OBJECTS" :PACKAGE-NAME "WEBLOCKS-STORES"
      :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
       (:NAME "PREVALENCE-SYSTEM" :PACKAGE-NAME "CL-PREVALENCE" :EXTERNALP T))
      (:NAME "CLASS-NAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "ARGS" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "MAKE-PERSISTENT-INSTANCE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE"
      :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "STORE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL)
      (:NAME "CLASS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "INITARGS" :PACKAGE-NAME "WEBLOCKS-PREVALENCE" :EXTERNALP NIL))
     :DOCUMENTATION NIL))
   :EXTERNAL-SYMBOLS
   ((:NAME "MAKE-PERSISTENT-INSTANCE" :PACKAGE-NAME "WEBLOCKS-PREVALENCE"
     :EXTERNALP T)))))
