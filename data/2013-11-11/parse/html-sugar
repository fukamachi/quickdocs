
(:TYPE :SYSTEM :NAME "html-sugar" :AUTHOR
 "Walter C. Pelissero <walter@pelissero.de>" :MAINTAINER
 "Walter C. Pelissero <walter@pelissero.de>" :VERSION NIL :LICENCE "LGPL"
 :DESCRIPTION "HTML Helper Functions" :LONG-DESCRIPTION
 "A collection of functions to help generating HTML with (P)AServe."
 :DEPENDS-ON ("ASERVE" "WEBACTIONS" "SCLF" "UFFI") :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "HTML-SUGAR" :FULL-NAME "HTML-SUGAR" :DOCUMENTATION NIL
   :SYMBOL-LIST
   ((:TYPE :VARIABLE :SYMBOL
     (:NAME "*CRYPT-LIBRARY-PATHNAME*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
      NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE
     "(UFFI:FIND-FOREIGN-LIBRARY \"libcrypt\" '(\"/usr/local/lib/\" \"/usr/lib/\" \"/lib/\"))")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*CRYPT-LIBRARY-LOADED*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE "NIL")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SESSION-VARIABLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     ((:NAME "SETF" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "SESSION-VARIABLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :LAMBDA-LIST
     ((:NAME "VALUE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :MACRO :SYMBOL
     (:NAME "WITH-WA" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "ENT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :DOCUMENTATION
     "Create a local binding of WA to the current web action (taken
from ENT).")
    (:TYPE :MACRO :SYMBOL
     (:NAME "WITH-SESSION-VARIABLES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
       (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "VARIABLES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "REQUEST-QUERY-VALUES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "KEY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "POST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "T" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      ((:NAME "URI" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "T" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      ((:NAME "TEST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       ((:NAME "FUNCTION" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        (:NAME "EQUAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
      ((:NAME "EXTERNAL-FORMAT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "*DEFAULT-ASERVE-EXTERNAL-FORMAT*" :PACKAGE-NAME "NET.ASERVE"
        :EXTERNALP T)))
     :DOCUMENTATION "Just like REQUEST-QUERY-VALUE but KEY is expected to accur
more than once in the query, so return all its values in a list.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "QUERY-VALUE-STRING" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "REQUEST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "VARIABLE-NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&OPTIONAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "MULTIPLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Similar to REQUEST-QUERY-VALUE but case insensitive.  If MULTIPLE
is true, the returned value is a list of values; one for each
occurrence of VARIABLE-NAME in the query REQUEST.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "QUERY-VALUE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "REQUEST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "VARIABLE-NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&OPTIONAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "MULTIPLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Similar to QUERY-VALUE-STRING, but interpret the string value as
Lisp value.")
    (:TYPE :FUNCTION :SYMBOL
     ((:NAME "SETF" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "QUERY-VALUE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :LAMBDA-LIST
     ((:NAME "VALUE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "REQUEST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "VARIABLE-NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&OPTIONAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "MULTIPLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :MACRO :SYMBOL
     (:NAME "WITH-QUERY-VALUES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "REQUEST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "VARIABLES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :MACRO :SYMBOL
     (:NAME "WITH-REQUEST-VALUES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "REQUEST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "VARIABLES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :MACRO :SYMBOL
     (:NAME "DEFCLP" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "SESSION-VARIABLES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FORMS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Define a Common Lisp Page function.  This can be then referred
in a CLP page in the usual way.  This macro captures some
variables which can be used by FORMS.  These are: REQ, ENT, ARGS,
BODY, WA, SESSION.  See the AServe documentation for their
meaning.")
    (:TYPE :MACRO :SYMBOL
     (:NAME "DEFWA" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "VARIABLES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FORMS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Define a web action (aka web page).  A web action is supposed
to return either :CONTINUE or a string of the name of the page to
redirect the browser to.  This macro captures some variables which
can be used by FORMS.  These are: REQ, ENT, WA, SESSION.  See the
AServe documentation for their meaning.")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*DEFAULT-LANGUAGE*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :DOCUMENTATION NIL :INITIAL-VALUE "\"en\"")
    (:TYPE :MACRO :SYMBOL
     (:NAME "DEFPAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      ((:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "VARIABLES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "TITLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       ((:NAME "LANGUAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
        (:NAME "*DEFAULT-LANGUAGE*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
       (:NAME "OUTPUT-PAGE-HEAD" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "BODY-ARGS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "TIMEOUT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :DOCUMENTATION
     "Define a web page.  Header and footer are standard.  BODY is
supposed to output the dynamic part of the page.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CURRENT-PAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "REQUEST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "ENTITY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Return the current page path excluding prefix, session ID (if
present), and query variables.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "ENCODE-URL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "ENT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "PAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&OPTIONAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "QUERY-VALUES-ALIST" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION "Encode an url using when appropriate the session id.
QUERY-VALUES-ALIST is a list of pairs where the car of each pair
is a string or a keyword and the cdr is its value.")
    (:TYPE :MACRO :SYMBOL (:NAME "URL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "PAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "QUERY-VALUES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION "Encode an URL based on current status.  This means that the
URL may contain any additonal information required to keep the
association to the webactions' session.  This macro expect to
find a couple of bindings in the current lexical environment: REQ
and ENT.  These are normally guaranted by DEFWA and DEFCLP
macros.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "HTML-SELECT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "CHOICES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "SELECTED" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "MULTIPLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Output HTML for a <SELECT> input item.  NAME is the name to be
given to the input item.  CHOICES is a list of pairs:

  (id . description)

The descriptions fill the selection box while the ids are passed
to the web server.  If SELECTED tells which items of the
selection should be selected by default.  If MULTIPLE tell to
make a multiple choice selection input item of that size in
lines.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "HTML-RADIO" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "CHOICES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "SELECTED" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "VERTICAL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Output HTML for a <RADIO> input item.  NAME is the name to be
given to the input item.  CHOICES is a list of pairs:

  (id . description)

The descriptions fill the selection box while the ids are passed
to the web server.  If SELECTED tells which item of the radio
buttons groub should be selected by default.  If VERTICAL is true
lays the radio buttons vertically rather than horizontally.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "HTML-CHECKBOX" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "CHECKED" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "LABEL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      ((:NAME "VALUE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "T" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :MACRO :SYMBOL
     (:NAME "HTML-TABLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     (((:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "ARGS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :DOCUMENTATION
     "Generate an HTML table with ARGS and run BODY with TR defined
locally as a macro that outputs table's TR elements of class ODD
or EVEN, according to their position within tha table.")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*DEFAULT-FORM-CLASS*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :DOCUMENTATION
     "The default CSS class of the form tables generated by WITH-HTML-FORM."
     :INITIAL-VALUE "\"form\"")
    (:TYPE :MACRO :SYMBOL
     (:NAME "WITH-HTML-FORM" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "URL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
       (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       ((:NAME "CLASS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        (:NAME "*DEFAULT-FORM-CLASS*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
       (:NAME "SUBMIT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "RESET" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "STYLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       ((:NAME "METHOD" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T) "post"))
      (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FIELDS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Creates an HTML form of CSS class CLASS.  SUBMIT is the label
on the OK button.  If RESET is true add a reset button.  If RESET
is a string use that as the label on the reset button.  Each
field in FIELDS is a list of which the first element is a string
(the field description) and the rest is HTML code to appear next
to it.  Local to this block the macro INPUT is defined.  If the
first element is the keyword :HIDDEN, the field won't have a
table entry but it will be hidden from the user; in this case the
other elements are the name and value of the field.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "HTML-BOOKMARKS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "ENT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "SELECTOR" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "BOOKMARKS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*BUTTON-STYLE*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :DOCUMENTATION "Type of HTML rendering for button items.  This can
be :IMPLICIT-FORM or :FANCY-LINK.  See the function BUTTON for
further details.  Both require support from the stylesheet,
though a bit less for the implicit form.  Something like this
would do:

form.button {
  display: inline;
  margin: .5em;
}


a.button {
  border: outset;
  display: inline;
  font-weight: bold;
  padding: .3em .8em .5em .8em;
  background-color: #BBB;
  margin: .3em .5em .3em .5em;
  color: #000;
  text-decoration: none;
}

a.button img {
  border: none;
  padding: 0;
  margin: 0;
}

a.button:hover {
  background-color: #DDD;
}

a.button:active {
  border: none;
  background-color: #DDD;
}"
     :INITIAL-VALUE ":FANCY-LINK")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "BUTTON" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "LABEL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "URL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "DESCRIPTION" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "COLOUR" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "IMAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION "Create an HTML link to URL having the look of a button.
If IMAGE is available use it, otherwise render LABEL as a rectangular
button.  IMAGE can be a string or a pathname.")
    (:TYPE :CLASS :SYMBOL
     (:NAME "BETTER-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
      T)
     :SUPER-CLASS-LIST
     ((:NAME "PASSWORD-AUTHORIZER" :PACKAGE-NAME "NET.ASERVE" :EXTERNALP T))
     :DOCUMENTATION
     "Convenience base class to diversify AUTHORIZE method (below)." :SLOT-LIST
     NIL)
    (:TYPE :CLASS :SYMBOL
     (:NAME "CRYPT-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
      T)
     :SUPER-CLASS-LIST
     ((:NAME "BETTER-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
       T))
     :DOCUMENTATION
     "Access authoriser for Unix-like accounts.  This class is similar
to PASSWORD-AUTHORISER but passwords in ALLOWED are ancrypted with
Unix crypt(3).  User passwords are supposed to be taken from
/etc/passwd (or /etc/master.passwd) or encrypted in the same way."
     :SLOT-LIST NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "AUTHORISER-GET-USER-PASSWORD" :PACKAGE-NAME "HTML-SUGAR"
      :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "AUTHORISER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "USER-NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION "Return the password associated with USER-NAME.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "AUTHORISER-GET-USER-PASSWORD" :PACKAGE-NAME "HTML-SUGAR"
      :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "AUTHORISER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "BETTER-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR"
        :EXTERNALP T))
      ((:NAME "USER-NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION
     "Default method that looks up USER-NAME in the alist contained
by the ALLOWED slot of AUTHORISER.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "%CRYPT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "KEY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "SALT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CRYPT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "KEY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "SALT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION "Encrypt KEY using SALT.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CRYPT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "KEY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "SALT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION "Encrypt KEY using SALT.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "AUTHORISER-DENY-PAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "AUTH" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "BETTER-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR"
        :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AUTHORISER-CHECK-PASSWORD" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
      T)
     :LAMBDA-LIST
     (((:NAME "AUTH" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "BETTER-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR"
        :EXTERNALP T))
      (:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "PASSWORD" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AUTHORISER-CHECK-PASSWORD" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
      T)
     :LAMBDA-LIST
     (((:NAME "AUTH" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "CRYPT-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
        T))
      (:NAME "NAME" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "PASSWORD" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "AUTHORIZE" :PACKAGE-NAME "NET.ASERVE" :EXTERNALP T) :LAMBDA-LIST
     (((:NAME "AUTH" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
       (:NAME "BETTER-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR"
        :EXTERNALP T))
      ((:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
       (:NAME "HTTP-REQUEST" :PACKAGE-NAME "NET.ASERVE" :EXTERNALP T))
      ((:NAME "ENT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
       (:NAME "ENTITY" :PACKAGE-NAME "NET.ASERVE" :EXTERNALP NIL)))
     :DOCUMENTATION
     "Check if REQ is valid request, return T if yes, :DONE if we request
for a new name and password.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "REDIRECT-TO" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "ENT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
      (:NAME "URL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WRITE-HTML-SEQUENCE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "SEQUENCE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "*HTML-STREAM*" :PACKAGE-NAME "NET.HTML.GENERATOR" :EXTERNALP T))
      ((:NAME "START" :PACKAGE-NAME "NET.ASERVE" :EXTERNALP T) 0)
      (:NAME "END" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION "Write a sequence to HTML stream.  This is more general than
WRITE-HTML-STRING and thus more appropriate to write arbitrary
sequences.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "COMPRESS-CSS-STREAM" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "IN" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL)
      (:NAME "OUT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "COMPRESS-CSS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
     :LAMBDA-LIST ((:NAME "CSS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP NIL))
     :DOCUMENTATION
     "Remove superfluous whitespace and comments from CSS, which is
supposed to be a Cascading Style Sheet in the form of a string."))
   :EXTERNAL-SYMBOLS
   ((:NAME "WRITE-HTML-SEQUENCE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "WITH-QUERY-STRING-VALUES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "INPUT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "ENT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "WITH-SESSION-VARIABLES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "REQUEST-QUERY-VALUES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "THEAD" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "BUTTON" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "CRYPT-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "COMPRESS-CSS-STREAM" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "SESSION" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "COMPRESS-CSS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "DEFPAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "*DEFAULT-LANGUAGE*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "AUTHORISER-DENY-PAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "DEFCLP" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "WITH-HTML-FORM" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "ARGS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "HTML-CHECKBOX" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "HTML-SELECT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "BODY" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "DEFWA" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "ENCODE-URL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "QUERY-VALUE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "CURRENT-PAGE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "SESSION-VARIABLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "HTML-TABLE" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "CRYPT" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "REQ" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "HTML-RADIO" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "REDIRECT-TO" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "WA" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "WITH-QUERY-VALUES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "AUTHORISER-GET-USER-PASSWORD" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
     T)
    (:NAME "URL" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "TABLE-ROW-NUMBER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "*BUTTON-STYLE*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "*DEFAULT-FORM-CLASS*" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "AUTHORISER-CHECK-PASSWORD" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "ANCHOR" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "QUERY-VALUE-STRING" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "HTML-BOOKMARKS" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "BETTER-PASSWORD-AUTHORISER" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP
     T)
    (:NAME "TR" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)
    (:NAME "WITH-REQUEST-VALUES" :PACKAGE-NAME "HTML-SUGAR" :EXTERNALP T)))))
