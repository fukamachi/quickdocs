
(:TYPE :SYSTEM :NAME "cl-async-test" :AUTHOR
 "Andrew Danger Lyon <orthecreedence@gmail.com>" :MAINTAINER NIL :VERSION "0.2"
 :LICENCE "MIT" :DESCRIPTION
 "TESTS FOR Asynchronous operations for Common Lisp." :LONG-DESCRIPTION NIL
 :DEPENDS-ON ("CFFI" "CL-ASYNC" "EOS" "BORDEAUX-THREADS" "USOCKET")
 :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "CL-ASYNC-TEST" :FULL-NAME "CL-ASYNC-TEST"
   :DOCUMENTATION NIL :SYMBOL-LIST
   ((:TYPE :MACRO :SYMBOL
     (:NAME "ASYNC-LET" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "BINDINGS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL))
     :DOCUMENTATION
     "Wrap an async op inside of a let/start-event-loop block to mimick a blocking
   action. Bindings must be set from withing the block via setf.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "TEST-TIMEOUT" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "SECONDS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL))
     :DOCUMENTATION
     "Make sure a test times out after the given num seconds. An event loop can't
   do this itself without skewing results. Uses event base IDs to make sure it
   doesn't cancel an event loop that test-timeout wasn't called inside of.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CONCAT" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "ARGS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL))
     :DOCUMENTATION
     "Shortens string concatenation because I'm lazy and really who the hell wants
   to type out (concatenate 'string ...) seriously, I mispell concatentate like
   90% of the time I type it out.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "ID" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "VAL" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL))
     :DOCUMENTATION
     "Returns val. Yes, yes. I know that the identity function exists, but
   seriously I'm not going to waste precious time out of my life typing identity
   when I can just type id. The idea is the same, and everybody KNOWS what I'm
   trying to express.
   
   Oh one more thing: the only reason I NEED identi...err, id is because Eos
   can't use its `is` macro around another macro. So I need a function to wrap
   it. Lame. BUT such is life.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "GET-USOCKET-FD" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "CONNECTION" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL))
     :DOCUMENTATION "Gets the fd from a usocket connection.")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*STREAM-BUFFER*" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE
     "(MAKE-ARRAY 8096 :ELEMENT-TYPE '(UNSIGNED-BYTE 8))")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SETUP-PROFILE" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*HTTP-RESPONSE*" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE "(BABEL:STRING-TO-OCTETS
 (WITH-OUTPUT-TO-STRING (CL-ASYNC-TEST::S)
   (FORMAT CL-ASYNC-TEST::S \"HTTP/1.1 200 OK~c~c\" #\\Return #\\Newline)
   (FORMAT CL-ASYNC-TEST::S \"Date: Wed, 03 Oct 2012 23:43:10 GMT~c~c\" #\\Return
           #\\Newline)
   (FORMAT CL-ASYNC-TEST::S \"Content-Type: text/plain~c~c\" #\\Return #\\Newline)
   (FORMAT CL-ASYNC-TEST::S \"Content-Length: 9~c~c\" #\\Return #\\Newline)
   (FORMAT CL-ASYNC-TEST::S \"~c~c\" #\\Return #\\Newline)
   (FORMAT CL-ASYNC-TEST::S \"omglolwtf\")))")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "BENCHMARK-SERVER" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "PORT" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) 9009)
      ((:NAME "REQUEST-DELAY" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) 0)
      ((:NAME "NUM-REQUESTS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
       40000))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "BENCHMARK-CLIENT" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "SERVER" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
       "127.0.0.1")
      ((:NAME "PORT" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) 9009)
      ((:NAME "NUM-REQUESTS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
       40000)
      ((:NAME "DELAY" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) 1)
      ((:NAME "CLIENT-ID" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) 0))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "BENCHMARK-DELAYS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "NUM-DELAYS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) 40000)
      ((:NAME "DELAY" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) 1.e-13))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "BENCHMARK-DATA-POINTERS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "NUM-POINTERS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
       10000))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "LOL" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL) :LAMBDA-LIST
     (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T) :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SIMPLE-TEST" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "RUN-TESTS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "SSL" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP NIL))
     :DOCUMENTATION NIL))
   :EXTERNAL-SYMBOLS
   ((:NAME "BENCHMARK-CLIENT" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP T)
    (:NAME "RUN-TESTS" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP T)
    (:NAME "BENCHMARK-SERVER" :PACKAGE-NAME "CL-ASYNC-TEST" :EXTERNALP T)))))
