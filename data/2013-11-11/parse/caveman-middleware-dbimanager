
(:TYPE :SYSTEM :NAME "caveman-middleware-dbimanager" :AUTHOR
 "Eitarow Fukamachi" :MAINTAINER NIL :VERSION "0.1" :LICENCE "LLGPL"
 :DESCRIPTION "Clack Middleware for managing CL-DBI connections"
 :LONG-DESCRIPTION NIL :DEPENDS-ON ("CLACK" "DBI") :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER" :FULL-NAME
   "CAVEMAN.MIDDLEWARE.DBIMANAGER" :DOCUMENTATION NIL :SYMBOL-LIST
   ((:TYPE :VARIABLE :SYMBOL
     (:NAME "*DBI-MANAGER*" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
      :EXTERNALP NIL)
     :DOCUMENTATION "An instance of `dbi-manager' for the current HTTP request.
Since this variable meant to be bound lexically, this is available only during a HTTP request."
     :INITIAL-VALUE "NIL")
    (:TYPE :CLASS :SYMBOL
     (:NAME "DBI-MANAGER" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
      :EXTERNALP NIL)
     :SUPER-CLASS-LIST NIL :DOCUMENTATION
     "Class for managing CL-DBI connections." :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "DATABASE-SETTINGS" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL)
       :ACCESSORS NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "CONNECTIONS" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL)
       :ACCESSORS NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :CLASS :SYMBOL
     (:NAME "<CAVEMAN-MIDDLEWARE-DBIMANAGER>" :PACKAGE-NAME
      "CAVEMAN.MIDDLEWARE.DBIMANAGER" :EXTERNALP T)
     :SUPER-CLASS-LIST
     ((:NAME "<MIDDLEWARE>" :PACKAGE-NAME "CLACK.MIDDLEWARE" :EXTERNALP T))
     :DOCUMENTATION "Clack Middleware for using CL-DBI.
This is similar to `<clack-middleware-dbi>', except this doesn't always connect (and disconnect) for each HTTP requests."
     :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "DBI-MANAGER" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL)
       :ACCESSORS NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :METHOD :SYMBOL
     (:NAME "INITIALIZE-INSTANCE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "THIS" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER" :EXTERNALP
        NIL)
       (:NAME "<CAVEMAN-MIDDLEWARE-DBIMANAGER>" :PACKAGE-NAME
        "CAVEMAN.MIDDLEWARE.DBIMANAGER" :EXTERNALP T))
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "DATABASE-SETTINGS" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
       :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "CALL" :PACKAGE-NAME "CLACK.COMPONENT" :EXTERNALP T) :LAMBDA-LIST
     (((:NAME "THIS" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER" :EXTERNALP
        NIL)
       (:NAME "<CAVEMAN-MIDDLEWARE-DBIMANAGER>" :PACKAGE-NAME
        "CAVEMAN.MIDDLEWARE.DBIMANAGER" :EXTERNALP T))
      (:NAME "ENV" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER" :EXTERNALP
       NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "GET-CONNECTION" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
      :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "MANAGER" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL)
       (:NAME "DBI-MANAGER" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL))
      (:NAME "&OPTIONAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "DATABASE-NAME" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
       :EXTERNALP NIL))
     :DOCUMENTATION
     "Return a connected DBI connection for a database for `database-name'.
If `database-name' is NIL, the first one in database settings will be adopted.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CONNECT-DB" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
      :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "&OPTIONAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "DATABASE-NAME" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
       :EXTERNALP NIL))
     :DOCUMENTATION
     "Return a connected DBI connection for database for `database-name'.
This is meant to be used in an actual application.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "DEFAULT-DATABASE-SETTING" :PACKAGE-NAME
      "CAVEMAN.MIDDLEWARE.DBIMANAGER" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "MANAGER" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL)
       (:NAME "DBI-MANAGER" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "DATABASE-SETTING" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
      :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "MANAGER" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL)
       (:NAME "DBI-MANAGER" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
        :EXTERNALP NIL))
      (:NAME "DATABASE-NAME" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
       :EXTERNALP NIL))
     :DOCUMENTATION NIL))
   :EXTERNAL-SYMBOLS
   ((:NAME "<CAVEMAN-MIDDLEWARE-DBIMANAGER>" :PACKAGE-NAME
     "CAVEMAN.MIDDLEWARE.DBIMANAGER" :EXTERNALP T)
    (:NAME "CONNECT-DB" :PACKAGE-NAME "CAVEMAN.MIDDLEWARE.DBIMANAGER"
     :EXTERNALP T)))))
