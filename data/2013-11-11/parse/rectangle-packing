
(:TYPE :SYSTEM :NAME "rectangle-packing" :AUTHOR
 "Willem Rein Oudshoorn <woudshoo@xs4all.nl>" :MAINTAINER NIL :VERSION "1.0.0"
 :LICENCE "LLGPL, but I am flexible, ask me if you want something else."
 :DESCRIPTION
 "Code to pack rectangles into a bigger rectangle.  Useful for texture packing for OpenGL."
 :LONG-DESCRIPTION NIL :DEPENDS-ON NIL :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "RECTANGLE-PACKING" :FULL-NAME "RECTANGLE-PACKING"
   :DOCUMENTATION NIL :SYMBOL-LIST
   ((:TYPE :VARIABLE :SYMBOL
     (:NAME "*SIZE*" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE "(LIST 0 0)")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "PACK-RECTANGLES-TREE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      T)
     :LAMBDA-LIST
     ((:NAME "RECTANGLES" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "SIZE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       ((:NAME "LIST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T) 1000 1000)))
     :DOCUMENTATION "Takes a list of rectangles, where each rectangle
is specified as (width height . rest).

Returns a tree containing the pack information.  

The size parameter is a list of the form (width height . rest) and 
this specifies size of the target rectangle in which all the rectangles are packed.

If some rectangles do not fit they are silently skipped.  To see if
the rectangles are skipped you have to call 
`rectangle-tree-to-rectangle-list' and compare the length of the
resulting list. 

NOTE: This function tries to pack the rectangles one by one.  
      So the sort order can have a huge impact on the efficiency 
      of the packing.  

      Experience has shown that in practice it is good idea to
      sort the rectangles on size (the area).  With the largest
      rectangles first.
")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "RECTANGLE-TREE-TO-RECTANGLE-LIST" :PACKAGE-NAME
      "RECTANGLE-PACKING" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "ROOT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION
     "Takes a rectangle tree as returned by `pack-rectangles-tree' as argument and returns
the packed rectangles as a list.

Each item of the list is rectangle, specified as (x y orientation . rectangle)
where 'rectangle' is one of the original inputed rectangle.
The location of the packed rectangle is given by 'x' and 'y'.

Orientation is either :0 or :90 depending if the rectangle is placed as given, or rotated.
Note that the current algorithm does not use rotation and will always have :0 as orientation.
")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "PACK-RECTANGLES" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "RECTANGLES" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "SIZE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       ((:NAME "LIST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T) 1000 1000)))
     :DOCUMENTATION "Takes a list of rectangles, where each rectangle
is specified as (width height . rest).

The size argument specifies the size of the target rectangle.

Returns a list of (x y orientation . rectangle)
Where rectangle is one of the argument rectangles
and orientation is either :0 or :90 (when it is rotated).
The location of the rectangles is given by 'x' and 'y'.

Note that if not all rectangles can be placed, they will be silently
dropped from the packing and from the output.  

To see which rectangles are packed you can use

   (mapcar (pack-rectangles ...) #'cdddr)

NOTE: See also the note on the sort order of the rectangles in the 
      function `pack-rectangles-tree'
 ")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "TREE-UTILIZED-SIZE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      T)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION
     "Returns the minimum enclosing rectangle of the rectangle tree `node'.

If the `node' is created with `pack-rectangles-tree' the result is 
guarenteed (with restrictions, see the `pack-rectangles-tree' function)
to fit in the given size.  

However it is of course possible that the packing does not use the whole 
rectangle.  This function returns the smallest enclosing rectangle for the packing.

The return value is a list of two elements:

  (width height)
")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SORT-RECTANGLES-ON-SIZE" :PACKAGE-NAME "RECTANGLE-PACKING"
      :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "RECTANGLES" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION "Sort the `rectangles' form largest to smalles area.
This operation is non-destructive and for the format of the `rectangles' argument 
see `pack-rectangles'.")
    (:TYPE :CLASS :SYMBOL
     (:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :SUPER-CLASS-LIST NIL :DOCUMENTATION NIL :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "CONTENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS
       ((:NAME "CONTENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "LEFT-CHILD" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS
       ((:NAME "LEFT-CHILD" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "RIGHT-CHILD" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS
       ((:NAME "RIGHT-CHILD" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :GENERIC :SYMBOL
     (:NAME "WALK-TREE-PRE-ORDER" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "FUNCTION" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WALK-TREE-PRE-ORDER" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
      (:NAME "FUNCTION" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WALK-TREE-PRE-ORDER" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
      (:NAME "FUNCTION" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WALK-TREE-PRE-ORDER" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "FUNCTION" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WALK-TREE-PRE-ORDER" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "FUNCTION" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :CLASS :SYMBOL
     (:NAME "DECISION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :SUPER-CLASS-LIST NIL :DOCUMENTATION NIL :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "DECISION-VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "LOW" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "DECISION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "HIGH" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS NIL :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :CLASS :SYMBOL
     (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :SUPER-CLASS-LIST NIL :DOCUMENTATION NIL :SLOT-LIST
     ((:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "SPLIT-VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS
       ((:NAME "SPLIT-VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "LOW" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS
       ((:NAME "LOW" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "HIGH" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS
       ((:NAME "HIGH" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)
      (:TYPE :CLASS-SLOT :SYMBOL
       (:NAME "RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       :ACCESSORS
       ((:NAME "RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
       :READERS NIL :WRITERS NIL :DOCUMENTATION NIL)))
    (:TYPE :GENERIC :SYMBOL
     (:NAME "DIMENSION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "DIMENSION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "LIST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "DIMENSION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "LIST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "DIMENSION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL))
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "DIMENSION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL))
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "HV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "HV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "LIST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "HV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "LIST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "HV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "HV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "LV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "LV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "LIST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "LV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     (((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "LIST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "LV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "LV" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "OBJECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "VAR" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "EMPTY-TARGET-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "EMPTY-TARGET-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "EMPTY-TARGET-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "EMPTY-TARGET-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "DECISION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "EMPTY-TARGET-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "DECISION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "PLACED-RECTANGLE-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "NODE-CONTENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "PLACED-RECTANGLE-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "NODE-CONTENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "PLACED-RECTANGLE-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "NODE-CONTENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "PLACED-RECTANGLE-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "NODE-CONTENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "PLACED-RECTANGLE-P" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "NODE-CONTENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "RECTANGLE-FITS" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "RECTANGLE-FITS" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL))
      (:NAME "RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "RECTANGLE-FITS" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL))
      (:NAME "RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "INSERT-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
      (:NAME "RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION "Inserts the rectangle specified as (width height . rest)
in the tree, and if necessary expand the tree.

Special variables are *size* as (width height) of the total rectangle in which 
the rectangles are packed")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "TRANSLATE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "POINT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SPLIT-NODE-ONCE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION "Replaces the target node node
with a decision node with two target node children.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SPLIT-NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION "Node needs to be a target-rectangle and rectangle
needs to fit inside this rectangle.  

This function will change:

   node ... (target-rectangle)

==>
      node ... (decision)
       /      
      /     node ... (target-rectangle)
     /
   node ... (decision)
  /   
 /   node ... (target-rectangle)
/
node ... (target-rectangle = rectangle) 
")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WRITE-HTML" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
      (:NAME "FILE-NAME" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION
     "Writes a packing tree to an html file so the packing can be previewd.
The red rectangles are placed, the blue is empty space.

See `pack-rectangles-tree' for how to create a packing tree.
")
    (:TYPE :GENERIC :SYMBOL
     (:NAME "WRITE-SVG-ELEMENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "ELEMENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WRITE-SVG-ELEMENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "S" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      ((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "DECISION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WRITE-SVG-ELEMENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "S" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      ((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "DECISION" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WRITE-SVG-ELEMENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "S" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      ((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WRITE-SVG-ELEMENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "S" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      ((:NAME "RECT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "TARGET-RECTANGLE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
        NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WRITE-SVG-ELEMENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "S" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "WRITE-SVG-ELEMENT" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     (((:NAME "S" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      ((:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)
       (:NAME "NODE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP NIL)))
     :DOCUMENTATION NIL))
   :EXTERNAL-SYMBOLS
   ((:NAME "PACK-RECTANGLES-TREE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP
     T)
    (:NAME "TREE-UTILIZED-SIZE" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP T)
    (:NAME "RECTANGLE-TREE-TO-RECTANGLE-LIST" :PACKAGE-NAME "RECTANGLE-PACKING"
     :EXTERNALP T)
    (:NAME "PACK-RECTANGLES" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP T)
    (:NAME "SORT-RECTANGLES-ON-SIZE" :PACKAGE-NAME "RECTANGLE-PACKING"
     :EXTERNALP T)
    (:NAME "WRITE-HTML" :PACKAGE-NAME "RECTANGLE-PACKING" :EXTERNALP T)))))
