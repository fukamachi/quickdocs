
(:TYPE :SYSTEM :NAME "mw-equiv" :AUTHOR
 "Michael Weber <michaelw+equiv@foldr.org>" :MAINTAINER
 "Michael Weber <michaelw+equiv@foldr.org>" :VERSION "0.1.2" :LICENCE
 "BSD-like" :DESCRIPTION "Extensible object equivalence protocol"
 :LONG-DESCRIPTION "Extensible object equivalence protocol,
based on <http://home.pipeline.com/~hbaker1/ObjectIdentity.html>."
 :DEPENDS-ON NIL :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "MW-EQUIV" :FULL-NAME "MW-EQUIV" :DOCUMENTATION NIL
   :SYMBOL-LIST
   ((:TYPE :GENERIC :SYMBOL
     (:NAME "OBJECT-CONSTITUENTS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST ((:NAME "TYPE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION "Returns list of accessors used to determine
equivalence of objects of type TYPE.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-CONSTITUENTS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "TYPE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
         (:NAME "PATHNAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-CONSTITUENTS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "TYPE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
         (:NAME "PATHNAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-CONSTITUENTS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "TYPE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
         (:NAME "CONS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-CONSTITUENTS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "TYPE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       ((:NAME "EQL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
         (:NAME "CONS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))))
     :DOCUMENTATION NIL)
    (:TYPE :GENERIC :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST ((:NAME "OBJECT" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL))
     :DOCUMENTATION "Indicates whether OBJECT is frozen.  That is,
this function may return true only if OBJECT will not be mutated
in an observable way from the point of the call until the end of
its life time, otherwise false.")
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "CHARACTER" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "CHARACTER" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "NUMBER" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "NUMBER" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "NUMBER" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "NUMBER" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "PATHNAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "PATHNAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "PATHNAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "PATHNAME" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "VECTOR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "VECTOR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "VECTOR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "VECTOR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "CONS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "CONS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "CONS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "CONS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST ((:NAME "OBJECT" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :METHOD :SYMBOL
     (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST ((:NAME "OBJECT" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "OBJECT-SEQUENCE=" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "XS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL)
      (:NAME "YS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL))
     :DOCUMENTATION
     "Checks whether sequences XS and YS are element-wise equivalent,
by means of OBJECT=, and of the same length.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "OBJECT-VECTOR=" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "XS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL)
      (:NAME "YS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL))
     :DOCUMENTATION
     "Checks whether vectors XS and YS are element-wise equivalent,
by means of OBJECT=, and of the same length.  
Use OBJECT-SEQUENCE= instead.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "OBJECT=" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "X" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL)
      (:NAME "Y" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL)
      (:NAME "&OPTIONAL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP NIL))
     :DOCUMENTATION "Returns true if X and Y are (observationally) equivalent.
Hence, OBJECT= is an equivalence relation:
1. (object= x x)
2. (equal (object= x y frozenp) (object= y x frozenp))
3. (implies (and (object= x y frozenp) (object= y z frozenp))
            (object= x z frozenp))

Frozen objects (i.e., objects which are promised not to mutate)
are compared by recursing into their constituents, as specified by
OBJECT-CONSTITUENTS.  Mutable (i.e., not frozen) objects are
compared with the pointer equality EQ.

FROZENP can be used to override the defaults for X and Y given by
OBJECT-FROZENP.  It is a promise that none of the objects X and Y
are referring to with their constituents, or **any of the
constituents' constituents** are mutated from the time of the
call to OBJECT= onwards.

If one lies with FROZENP, OBJECT-FROZENP, or OBJECT-CONSTITUENTS,
all bets are off and the result of OBJECT= is meaningless.

OBJECT= diverges if both X and Y are circular data structures.

See also: <http://home.pipeline.com/~hbaker1/ObjectIdentity.html>"))
   :EXTERNAL-SYMBOLS
   ((:NAME "OBJECT-SEQUENCE=" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
    (:NAME "OBJECT-FROZENP" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
    (:NAME "OBJECT=" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
    (:NAME "OBJECT-VECTOR=" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)
    (:NAME "OBJECT-CONSTITUENTS" :PACKAGE-NAME "MW-EQUIV" :EXTERNALP T)))))
