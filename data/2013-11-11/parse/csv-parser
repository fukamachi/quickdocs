
(:TYPE :SYSTEM :NAME "csv-parser" :AUTHOR
 "Alain Picard <alain.picard@memetrics.com>" :MAINTAINER NIL :VERSION NIL
 :LICENCE "LLGPL" :DESCRIPTION
 "CSV parsing/writing utilities, a la Microsoft Excel" :LONG-DESCRIPTION NIL
 :DEPENDS-ON NIL :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "CSV-PARSER" :FULL-NAME "CSV-PARSER" :DOCUMENTATION NIL
   :SYMBOL-LIST
   ((:TYPE :VARIABLE :SYMBOL
     (:NAME "*FIELD-SEPARATOR*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
     :DOCUMENTATION "The character used to indicate the end of a field
   in a CSV file."
     :INITIAL-VALUE "#\\,")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*QUOTE-CHARACTER*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
     :DOCUMENTATION "The character used to protect embedded field separators
   (usually commas) and whitespace within a field.

   To import the *quote-character* itself, you must have
   it printed twice in the input stream."
     :INITIAL-VALUE "#\\\"")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*STATE*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL) :DOCUMENTATION
     "Holds a function which knows how to handle chars based
   on what we've seen so far."
     :INITIAL-VALUE "NIL")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*SPACES-GOBBLED*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :DOCUMENTATION
     "Keeps track of how many blanks have been skipped.  When emitting
   a field, we can trim extra right spaces, if appropriate, using this."
     :INITIAL-VALUE "NIL")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*CURRENT-FIELD*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :DOCUMENTATION "Holds the field we are currently working on."
     :INITIAL-VALUE "NIL")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*FIELDS*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :DOCUMENTATION "Holds the fields we have collected/parsed so far."
     :INITIAL-VALUE "NIL")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*NUM-FIELDS*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE
     "\"Holds the number of fields we have collected/parsed so far.\"")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "READ-CSV-LINE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
     :LAMBDA-LIST ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION "Read one line form a stream containing CSV data.
   Returns two values; a list of strings parsed, and
   the number of parsed values.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "MAP-CSV-FILE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "FILE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
      (:NAME "FN" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "LIMIT" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
      ((:NAME "SKIP-LINES" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL) 0)
      ((:NAME "EXTERNAL-FORMAT" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
       (:NAME "DEFAULT" :PACKAGE-NAME "KEYWORD" :EXTERNALP T))
      (((:NAME "FIELD-SEPARATOR" :PACKAGE-NAME "KEYWORD" :EXTERNALP T)
        (:NAME "*FIELD-SEPARATOR*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T))
       (:NAME "*FIELD-SEPARATOR*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T))
      (((:NAME "QUOTE-CHARACTER" :PACKAGE-NAME "KEYWORD" :EXTERNALP T)
        (:NAME "*QUOTE-CHARACTER*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T))
       (:NAME "*QUOTE-CHARACTER*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)))
     :DOCUMENTATION "Call FN (up to LIMIT times, if specified) with
   a list containing the fields parsed from the CSV
   file FILE.

   SKIP-LINES, if provided, is the number of lines to skip
   before starting to call FN.

   *FIELD-SEPARATOR* and *QUOTE-CHARACTER* can be bound to
   modify what separates fields and delimits fields.")
    (:TYPE :MACRO :SYMBOL
     (:NAME "DO-CSV-FILE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T) :LAMBDA-LIST
     ((((:NAME "FIELDS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
        (:NAME "NUM-FIELDS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
       (:NAME "FILE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
       (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "LIMIT" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
       ((:NAME "SKIP-LINES" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL) 0)
       ((:NAME "EXTERNAL-FORMAT" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
        (:NAME "DEFAULT" :PACKAGE-NAME "KEYWORD" :EXTERNALP T))
       (((:NAME "FIELD-SEPARATOR" :PACKAGE-NAME "KEYWORD" :EXTERNALP T)
         (:NAME "*FIELD-SEPARATOR*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T))
        (:NAME "*FIELD-SEPARATOR*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T))
       (((:NAME "QUOTE-CHARACTER" :PACKAGE-NAME "KEYWORD" :EXTERNALP T)
         (:NAME "*QUOTE-CHARACTER*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T))
        (:NAME "*QUOTE-CHARACTER*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
     :DOCUMENTATION "Repeatedly call BODY on CSV file FILE, binding
   FIELDS and NUM-FIELDS to a list containing the parsed fields,
   and the number of fields.
   Code runs inside a block with tagname NIL, so you
   may call (RETURN).

   *FIELD-SEPARATOR* and *QUOTE-CHARACTER* can be bound to
   modify what separates fields and delimits fields.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CHANGE-STATE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "STATE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "ADD-CHAR" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL) :LAMBDA-LIST
     ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)) :DOCUMENTATION
     NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "MAKE-EMPTY-FIELD" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "REMOVE-LAST-N-CHARS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "N" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "QUOTE-CHAR-P" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "END-OF-LINE-CHAR-P" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "END-OF-FIELD-CHAR-P" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WHITE-SPACE-CHAR-P" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SKIP-WHITE-SPACE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "REGULAR-FIELD" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "GOT-FIRST-QUOTE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "GOT-SECOND-QUOTE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "EMIT-FIELD" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TESTS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL) :LAMBDA-LIST
     (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T) :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-BLANK" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-BLANKS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-EMPTY" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-EMPTY-1" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-SIMPLE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-QUOTED" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-SPACE-HANDLING" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP
      NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-OTHER-DELIMITERS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP
      NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-DOUBLE-QUOTES" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-EMBEDDED-LINES" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP
      NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CSV-TEST-EMBEDDED-COMMAS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP
      NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WRITE-CSV-LINE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FIELDS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
     :DOCUMENTATION "Write one CSV line to STREAM, containing fields.
   FIELDS is any (1d) sequence containing strings, symbols or numbers.

   Try to write it as esthetically pleasing as possible,
   i.e. don't output the *quote-character* unless necessary
   to protect the integrity of the data.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WRITE-CSV-LINE-ON-CONS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FIELDS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WRITE-CSV-LINE-ON-ARRAY" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FIELDS" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WRITE-CSV-FIELD" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FIELD" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "SPECIAL-CHAR-P" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "CHAR" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WRITE-CSV-STRING-SAFELY" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP
      NIL)
     :LAMBDA-LIST
     ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "STRING" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "WRITE-PROTECTED-COPY" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "FIELD" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP NIL))
     :DOCUMENTATION NIL))
   :EXTERNAL-SYMBOLS
   ((:NAME "MAP-CSV-FILE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
    (:NAME "READ-CSV-LINE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
    (:NAME "*FIELD-SEPARATOR*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
    (:NAME "*QUOTE-CHARACTER*" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
    (:NAME "DO-CSV-FILE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)
    (:NAME "WRITE-CSV-LINE" :PACKAGE-NAME "CSV-PARSER" :EXTERNALP T)))))
