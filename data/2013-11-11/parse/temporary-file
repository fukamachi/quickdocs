
(:TYPE :SYSTEM :NAME "temporary-file" :AUTHOR NIL :MAINTAINER NIL :VERSION NIL
 :LICENCE NIL :DESCRIPTION "Temporary file creation library" :LONG-DESCRIPTION
 NIL :DEPENDS-ON
 ("ALEXANDRIA" "BORDEAUX-THREADS" "CL-FAD" "CL-PPCRE" "UNIT-TEST")
 :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "TEMPORARY-FILE" :FULL-NAME "TEMPORARY-FILE"
   :DOCUMENTATION NIL :SYMBOL-LIST
   ((:TYPE :VARIABLE :SYMBOL
     (:NAME "*DEFAULT-TEMPLATE*" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP T)
     :DOCUMENTATION NIL :INITIAL-VALUE "\"TEMPORARY-FILES:TEMP-%\"")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*MAX-TRIES*" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE "10000")
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*NAME-RANDOM-STATE*" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP
      NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE "(MAKE-RANDOM-STATE T)")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "GETENV" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
     :LAMBDA-LIST ((:NAME "X" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL))
     :DOCUMENTATION "Query the libc runtime environment. See getenv(3).")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "DIRECTORY-FROM-ENVIRONMENT" :PACKAGE-NAME "TEMPORARY-FILE"
      :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "ENVIRONMENT-VARIABLE-NAME" :PACKAGE-NAME "TEMPORARY-FILE"
       :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "GET-DEFAULT-TEMPORARY-DIRECTORY" :PACKAGE-NAME "TEMPORARY-FILE"
      :EXTERNALP NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :VARIABLE :SYMBOL
     (:NAME "*CREATE-FILE-NAME-LOCK*" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP
      NIL)
     :DOCUMENTATION NIL :INITIAL-VALUE
     "(BORDEAUX-THREADS:MAKE-LOCK \"Temporary File Name Creation Lock\")")
    (:TYPE :MACRO :SYMBOL
     (:NAME "WITH-FILE-NAME-LOCK-HELD" :PACKAGE-NAME "TEMPORARY-FILE"
      :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "GENERATE-RANDOM-STRING" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP
      NIL)
     :LAMBDA-LIST (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "GENERATE-RANDOM-PATHNAME" :PACKAGE-NAME "TEMPORARY-FILE"
      :EXTERNALP NIL)
     :LAMBDA-LIST
     ((:NAME "TEMPLATE" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
      (:NAME "RANDOM-STRING-GENERATOR" :PACKAGE-NAME "TEMPORARY-FILE"
       :EXTERNALP NIL))
     :DOCUMENTATION NIL)
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "OPEN-TEMPORARY" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP T)
     :LAMBDA-LIST
     ((:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "OPEN-ARGUMENTS" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "TEMPLATE" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
       (:NAME "*DEFAULT-TEMPLATE*" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP
        T))
      ((:NAME "GENERATE-RANDOM-STRING" :PACKAGE-NAME "TEMPORARY-FILE"
        :EXTERNALP NIL)
       ((:NAME "QUOTE" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
        (:NAME "GENERATE-RANDOM-STRING" :PACKAGE-NAME "TEMPORARY-FILE"
         :EXTERNALP NIL)))
      ((:NAME "MAX-TRIES" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
       (:NAME "*MAX-TRIES*" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL))
      ((:NAME "DIRECTION" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
       (:NAME "OUTPUT" :PACKAGE-NAME "KEYWORD" :EXTERNALP T))
      (:NAME "&ALLOW-OTHER-KEYS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
     :DOCUMENTATION
     "Create a file with a randomly generated name and return the opened
   stream.  The resulting pathname is generated from TEMPLATE, which
   is a string representing a pathname template.  A percent sign (%)
   in that string is replaced by a randomly generated string to make
   the filename unique.  The default for TEMPLATE places temporary
   files in the TEMPORARY-FILES logical pathname host, which is
   automatically set up in a system specific manner.  The file name
   generated from TEMPLATE is merged with *DEFAULT-PATHNAME-DEFAULTS*,
   so random pathnames relative to that directory can be generated by
   not specifying a directory in TEMPLATE.

   GENERATE-RANDOM-STRING can be passed to override the default
   function that generates the random name component.  It should
   return a random string consisting of characters that are permitted
   in a pathname (logical or physical, depending on TEMPLATE).

   The name of the temporary file can be accessed calling the PATHNAME
   function on STREAM.  For convenience, the temporary file is opened
   on the physical pathname, i.e. if the TEMPLATE designate a logical
   pathname the translation to a physical pathname is performed before
   opening the stream.

   In order to create a unique file name, OPEN-TEMPORARY may loop
   internally up to MAX-TRIES times before giving up and signalling a
   CANNOT-CREATE-TEMPORARY-FILE condition.")
    (:TYPE :MACRO :SYMBOL
     (:NAME "WITH-OUTPUT-TO-TEMPORARY-FILE" :PACKAGE-NAME "TEMPORARY-FILE"
      :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "ARGS" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL))
     :DOCUMENTATION
     "Create a temporary file using OPEN-TEMPORARY with ARGS and run BODY
  with STREAM bound to the temporary file stream.  Returns the
  pathname of the file that has been created.  See OPEN-TEMPORARY for
  permitted options.")
    (:TYPE :MACRO :SYMBOL
     (:NAME "WITH-OPEN-TEMPORARY-FILE" :PACKAGE-NAME "TEMPORARY-FILE"
      :EXTERNALP T)
     :LAMBDA-LIST
     (((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "&REST" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "ARGS" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
       (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
       (:NAME "KEEP" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL)
       (:NAME "&ALLOW-OTHER-KEYS" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T))
      (:NAME "&BODY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "BODY" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP NIL))
     :DOCUMENTATION
     "Create a temporary file using OPEN-TEMPORARY with ARGS and run BODY
  with STREAM bound to the temporary file stream.  Returns the values
  returned by BODY.  By default, the file is deleted when BODY is
  exited. If a true value is passed in KEEP, the file is not deleted
  when the body is exited.  See OPEN-TEMPORARY for more permitted
  options."))
   :EXTERNAL-SYMBOLS
   ((:NAME "CANNOT-CREATE-TEMPORARY-FILE" :PACKAGE-NAME "TEMPORARY-FILE"
     :EXTERNALP T)
    (:NAME "OPEN-TEMPORARY" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP T)
    (:NAME "*DEFAULT-TEMPLATE*" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP T)
    (:NAME "WITH-OPEN-TEMPORARY-FILE" :PACKAGE-NAME "TEMPORARY-FILE" :EXTERNALP
     T)
    (:NAME "WITH-OUTPUT-TO-TEMPORARY-FILE" :PACKAGE-NAME "TEMPORARY-FILE"
     :EXTERNALP T)
    (:NAME "INVALID-TEMPORARY-PATHNAME-TEMPLATE" :PACKAGE-NAME "TEMPORARY-FILE"
     :EXTERNALP T)))))
