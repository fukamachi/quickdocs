
(:TYPE :SYSTEM :NAME "s-dot" :AUTHOR "Martin Loetzsch" :MAINTAINER NIL :VERSION
 "1.1" :LICENCE "BSD-style" :DESCRIPTION
 "Render Graphviz graphs from within Lisp" :LONG-DESCRIPTION
 "See http://martin-loetzsch.de/S-DOT/" :DEPENDS-ON NIL :PACKAGE-LIST
 ((:TYPE :PACKAGE :NAME "S-DOT" :FULL-NAME "S-DOT" :DOCUMENTATION
   "See http://martin-loetzsch.de/S-DOT" :SYMBOL-LIST
   ((:TYPE :VARIABLE :SYMBOL
     (:NAME "S-DOT-SYNTAX" :PACKAGE-NAME "S-DOT" :EXTERNALP NIL) :DOCUMENTATION
     NIL :INITIAL-VALUE "'((S-DOT::GRAPH
   (S-DOT::CLUSTER S-DOT::SUB-GRAPH S-DOT::NODE S-DOT::RECORD S-DOT::EDGE) NIL
   (S-DOT::BGCOLOR S-DOT::FONTCOLOR S-DOT::FONTNAME S-DOT::FONTSIZE
    S-DOT::LABEL S-DOT::MARGIN S-DOT::NODESEP S-DOT::RANKDIR S-DOT::RANKSEP
    RATIO S-DOT::SIZE))
  (S-DOT::CLUSTER
   (S-DOT::CLUSTER S-DOT::SUB-GRAPH S-DOT::NODE S-DOT::RECORD S-DOT::EDGE)
   (S-DOT::ID)
   (S-DOT::BGCOLOR S-DOT::COLOR S-DOT::FILLCOLOR S-DOT::FONTCOLOR
    S-DOT::FONTNAME S-DOT::FONTSIZE S-DOT::ID S-DOT::LABEL S-DOT::LABELJUST
    S-DOT::LABELLOC S-DOT::STYLE))
  (S-DOT::SUB-GRAPH (S-DOT::NODE S-DOT::RECORD) (S-DOT::RANK) (S-DOT::RANK))
  (S-DOT::NODE NIL (S-DOT::ID)
   (S-DOT::COLOR S-DOT::FILLCOLOR S-DOT::FIXEDSIZE S-DOT::FONTCOLOR
    S-DOT::FONTNAME S-DOT::FONTSIZE S-DOT::HEIGHT S-DOT::ID S-DOT::LABEL
    S-DOT::SHAPE S-DOT::STYLE S-DOT::WIDTH))
  (S-DOT::RECORD (S-DOT::RECORD S-DOT::NODE) NIL
   (S-DOT::COLOR S-DOT::FILLCOLOR S-DOT::FIXEDSIZE S-DOT::FONTCOLOR
    S-DOT::FONTNAME S-DOT::FONTSIZE S-DOT::HEIGHT S-DOT::LABEL S-DOT::SHAPE
    S-DOT::STYLE S-DOT::WIDTH))
  (S-DOT::EDGE NIL (S-DOT::FROM S-DOT::TO)
   (S-DOT::ARROWHEAD S-DOT::ARROWSIZE S-DOT::ARROWTAIL S-DOT::COLOR
    S-DOT::CONSTRAINT S-DOT::DECORATE S-DOT::DIR S-DOT::FONTCOLOR
    S-DOT::FONTNAME S-DOT::FONTSIZE S-DOT::FROM S-DOT::HEADLABEL
    S-DOT::HEADPORT S-DOT::LABEL S-DOT::LABELDISTANCE S-DOT::LABELFLOAT
    S-DOT::LABELFONTCOLOR S-DOT::LABELFONTNAME S-DOT::LABELFONTSIZE
    S-DOT::LHEAD S-DOT::LTAIL S-DOT::MINLEN S-DOT::STYLE S-DOT::SAMEHEAD
    S-DOT::SAMETAIL S-DOT::TAILLABEL S-DOT::TAILPORT S-DOT::TO)))")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "CHECK-SYNTAX" :PACKAGE-NAME "S-DOT" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "GRAPH" :PACKAGE-NAME "S-DOT" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "LEVEL" :PACKAGE-NAME "S-DOT" :EXTERNALP NIL) 0))
     :DOCUMENTATION
     "Checks whether the s-expression 'graph' is syntactically correct. 
Note that it does not check whether the attributes contain useful values.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "S-DOT->DOT" :PACKAGE-NAME "S-DOT" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "STREAM" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "GRAPH" :PACKAGE-NAME "S-DOT" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "CHECK-SYNTAX" :PACKAGE-NAME "S-DOT" :EXTERNALP T)
       (:NAME "T" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION
     "Generates dot syntax from a s-dot expression and writes the result to 'stream'.
This code looks indeed ugly. If you really want to understand what's going on, then it might
be easier to look in the the XSLT stylesheet at
http://www.martin-loetzsch.de/DOTML/dotml-1.3/dotml2dot.xsl . This code does exactly the same.")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "RENDER-S-DOT" :PACKAGE-NAME "S-DOT" :EXTERNALP T) :LAMBDA-LIST
     ((:NAME "FILE-NAME" :PACKAGE-NAME "S-DOT" :EXTERNALP NIL)
      (:NAME "FORMAT" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      (:NAME "GRAPH" :PACKAGE-NAME "S-DOT" :EXTERNALP NIL)
      (:NAME "&KEY" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)
      ((:NAME "CHECK-SYNTAX" :PACKAGE-NAME "S-DOT" :EXTERNALP T)
       (:NAME "T" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T)))
     :DOCUMENTATION
     "Renders a s-dot graph into a graphic file. 'file-name' should be a pathname.
If the file-name is /foo/bar.png, the dot file /foo/bar.dot is created and then rendered.
Format should be one out of http://www.graphviz.org/doc/info/output.html, 
for example svg, ps, gif, png, or jpg.
The asdf:run-shell is used to launch dot. If that does not work for you, write a 
similar function that uses (s-dot->dot) for dot generation and then runs dot on it.

Please note that it is more efficient to open a pipe to 'dot' instead of writing a 
file and reading that in again. A cross-platform pipe implementation can be found 
at  http://cvs.sourceforge.net/viewcvs.py/clocc/clocc/src/port/ext.lisp?view=markup")
    (:TYPE :FUNCTION :SYMBOL
     (:NAME "TEST-S-DOT" :PACKAGE-NAME "S-DOT" :EXTERNALP NIL) :LAMBDA-LIST
     (:NAME "NIL" :PACKAGE-NAME "COMMON-LISP" :EXTERNALP T) :DOCUMENTATION
     "Generates a few charts in /tmp/. If you don't have /tmp/, 
change the directory below to something else"))
   :EXTERNAL-SYMBOLS
   ((:NAME "RENDER-S-DOT" :PACKAGE-NAME "S-DOT" :EXTERNALP T)
    (:NAME "CHECK-SYNTAX" :PACKAGE-NAME "S-DOT" :EXTERNALP T)
    (:NAME "S-DOT->DOT" :PACKAGE-NAME "S-DOT" :EXTERNALP T)))))
